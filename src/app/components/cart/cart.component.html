<div class="cart-container">
  <div class="cart-header">
    <h2 class="cart-title">
      <i class="pi pi-shopping-cart"></i>
      {{ 'CART.TITLE' | translate }}
    </h2>
    <span class="cart-count" *ngIf="cart.itemCount > 0">
      {{ cart.itemCount }} {{ 'CART.ITEMS' | translate }}
    </span>
  </div>

  <!-- Empty Cart State -->
  <div class="empty-cart" *ngIf="isCartEmpty()">
    <div class="empty-cart-icon">
      <i class="pi pi-shopping-cart"></i>
    </div>
    <h3>{{ 'CART.EMPTY_TITLE' | translate }}</h3>
    <p>{{ 'CART.EMPTY_MESSAGE' | translate }}</p>
    <a routerLink="/service" class="btn btn-primary">
      {{ 'CART.BROWSE_SERVICES' | translate }}
    </a>
  </div>

  <!-- Cart Items -->
  <div class="cart-content" *ngIf="!isCartEmpty()">
    <div class="cart-items">
      <div class="cart-item" *ngFor="let item of cart.items; trackBy: trackByServiceId">
        <div class="item-image">
          <img [src]="item.image_link || '/assets/images/default-service.jpg'" 
               [alt]="item.service_name"
               onerror="this.src='/assets/images/default-service.jpg'">
        </div>
        
        <div class="item-details">
          <h4 class="item-name">{{ item.service_name }}</h4>
          <p class="item-description" *ngIf="item.description">
            {{ item.description }}
          </p>
          <div class="item-duration" *ngIf="item.duration">
            <i class="pi pi-clock"></i>
            {{ formatDuration(item.duration) }}
          </div>
        </div>

        <div class="item-controls">
          <div class="quantity-controls">
            <button class="quantity-btn" 
                    (click)="updateQuantity(item.service_id, item.quantity - 1)"
                    [disabled]="item.quantity <= 1">
              <i class="pi pi-minus"></i>
            </button>
            <span class="quantity">{{ item.quantity }}</span>
            <button class="quantity-btn" 
                    (click)="updateQuantity(item.service_id, item.quantity + 1)">
              <i class="pi pi-plus"></i>
            </button>
          </div>
          
          <div class="item-price">
            <span class="unit-price">{{ formatPrice(item.price) }}</span>
            <span class="total-price" *ngIf="item.quantity > 1">
              {{ formatPrice(getItemTotal(item)) }}
            </span>
          </div>
          
          <button class="remove-btn" 
                  (click)="removeItem(item.service_id)"
                  [title]="'CART.REMOVE_ITEM' | translate">
            <i class="pi pi-trash"></i>
          </button>
        </div>
      </div>
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary">
      <div class="summary-row" *ngIf="getTotalDuration() > 0">
        <span class="summary-label">
          <i class="pi pi-clock"></i>
          {{ 'CART.TOTAL_DURATION' | translate }}:
        </span>
        <span class="summary-value">{{ formatDuration(getTotalDuration()) }}</span>
      </div>
      
      <div class="summary-row subtotal">
        <span class="summary-label">{{ 'CART.SUBTOTAL' | translate }}:</span>
        <span class="summary-value">{{ formatPrice(cart.total) }}</span>
      </div>
      
      <div class="summary-row total">
        <span class="summary-label">{{ 'CART.TOTAL' | translate }}:</span>
        <span class="summary-value">{{ formatPrice(cart.total) }}</span>
      </div>
    </div>

    <!-- Cart Actions -->
    <div class="cart-actions">
      <button class="btn btn-secondary" (click)="clearCart()">
        <i class="pi pi-trash"></i>
        {{ 'CART.CLEAR_CART' | translate }}
      </button>
      
      <a routerLink="/service" class="btn btn-outline">
        <i class="pi pi-arrow-left"></i>
        {{ 'CART.CONTINUE_SHOPPING' | translate }}
      </a>
      
      <a routerLink="/transaction" class="btn btn-primary">
        <i class="pi pi-credit-card"></i>
        {{ 'CART.PROCEED_TO_PAYMENT' | translate }}
      </a>
    </div>
  </div>
</div>
